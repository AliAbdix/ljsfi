
<!--
	generated by pacmanFunctionLister.py
	please make changes in definition files, not this one
-->
<html>
<title>Basics
</title>
<body background="sky.gif">
<h1><font color=navy>Basics
</font></h1>
<hr size=5>
<dl>
<p>
<dt><font color=navy><a name="download1" id="download1">download&nbsp;<i>(FILE)</i></a></font>, <font color=navy><a name="downloadUntar2" id="downloadUntar2">downloadUntar&nbsp;<i>(FILE&nbsp;[,&nbsp;env])</i></a></font>, <font color=navy><a name="downloadUntarzip2" id="downloadUntarzip2">downloadUntarzip&nbsp;<i>(FILE&nbsp;[,&nbsp;env])</i></a></font>, <font color=navy><a name="untarzip2" id="untarzip2">untarzip&nbsp;<i>(FILE&nbsp;[,&nbsp;env])</i></a></font>
</dt>
<dd>These atoms are used to download files to the current working directory.  The <i>FILE</i> argument may be a full URL or a file
specified with SSH syntax or a file specified relative to a symbolic cache name or a local file.  Here are examples all downloading
the same file
<ul>
<li> download ('http://atlas.bu.edu/caches/tarballs/foo.tar.gz')
<li> download ('youssef@atlas.bu.edu:/caches/tarballs/foo.tar.gz')
<li> download ('BU/tarballs/foo.tar.gz')
<li> download ('/atlasgrid/caches/tarballs/foo.tar.gz')
</ul>
The optional <i>env</i> argument causes Pacman to set an environment variable to the full path of the top level untarred directory.
The download atom simply downloads; downloadUntar and downloadUntarZip are identical and both automatically untar and unzip as
necessary. Pacman guarantees that untarring does not overwrite existing files unless you override this feature with <b>-allow
tar-overwrite</b>.  Note that for untarzip(FILE), FILE must be in the current working directory (use cd otherwise to cd to
the right location).

</dd>
</p>
<p>
<dt><font color=navy><a name="md5check2" id="md5check2">md5check&nbsp;<i>(path,&nbsp;md5string)</i></a></font>
</dt>
<dd>md5check <i>(path, md5string)</i> checks if the file at <i>path</i> has md5 checksum-hexstring <i>md5string</i>.

</dd>
</p>
<p>
<dt><font color=navy><a name="setenv2" id="setenv2">setenv&nbsp;<i>(env,&nbsp;val)</i></a></font>, <font color=navy><a name="setenvTemp2" id="setenvTemp2">setenvTemp&nbsp;<i>(env,&nbsp;val)</i></a></font>, <font color=navy><a name="envIsSet1" id="envIsSet1">envIsSet&nbsp;<i>(env)</i></a></font>, <font color=navy><a name="envHasValue2" id="envHasValue2">envHasValue&nbsp;<i>(env,&nbsp;value)</i></a></font>, <font color=navy><a name="envHasValueTemp2" id="envHasValueTemp2">envHasValueTemp&nbsp;<i>(env,&nbsp;value)</i></a></font>
</dt>
<dd>These atoms let you set and test environment variables:
<ul>
<li> setenv <i>(env, val)</i> assigns environment variable <i>env</i> the value <i>val</i>.  Pacman both guarantees that the environment variable
that you set maintains it's value independent of any other packages and it also guarantees this value in setup scripts that Pacman
generates.
<li> envIsSet <i>(env)</i> requires that the environment variable has been set.
<li> envHasValue <i>(env, value)</i> requires that the environment variable has been set to the value <i>value</i> and guarantees
that this is true
</ul>
setenvTemp and envHasValueTemp differ from their non-temp versions in that they do not guarantee a permanent condition and do not
get put setup scripts.

</dd>
</p>
<p>
<dt><font color=navy><a name="setenvShell2" id="setenvShell2">setenvShell&nbsp;<i>(env,&nbsp;command)</i></a></font>
</dt>
<dd>setenvShell <i>(env,command)</i> executes the shell command <i>command</i> and, if the command returns without an
error code, sets environment variable <i>env</i> to the first non-blank line of the shell command output.

</dd>
</p>
<p>
<dt><font color=navy><a name="setenvShellTemp2" id="setenvShellTemp2">setenvShellTemp&nbsp;<i>(env,&nbsp;command)</i></a></font>
</dt>
<dd>Same as <i>setenvShell</i> except that the set environment variable is temporary in the same sense as
setenvTemp above.

</dd>
</p>
<p>
<dt><font color=navy><a name="path3" id="path3">path&nbsp;<i>(val&nbsp;[,&nbsp;env&nbsp;[,&nbsp;options]])</i></a></font>
</dt>
<dd>path <i>(value,[,[env,options]])</i> let's you add directories to standard unix path searching variables like the standard PATH and
LD_LIBRARY_PATH.  <i>env</i> defaults to PATH.  Pacman checks that the directories specified exists and guarantees that executable files 
in directories added this way are consistent.  If, for
example, you do <i>path('/usr/bin/')</i> and <i>path('/usr/local/bin')</i> and both contain the file <i>python</i>, Pacman will report an error.  This
guarantees that as an author of a Pacman package files that you add to paths are maintained independent of other packages.  Sometimes it is useful to 
suppress this checking, in which case you should put the word "no-check" in the optional <i>options</i> argument.  If "back" appears in the <i>options</i> string, 
Pacman adds the path to the end of the path variable list rather than the (default) front.

</dd>
</p>
<p>
<dt><font color=navy><a name="mkdir1" id="mkdir1">mkdir&nbsp;<i>(path)</i></a></font>, <font color=navy><a name="mkdirPersistent1" id="mkdirPersistent1">mkdirPersistent&nbsp;<i>(path)</i></a></font>
</dt>
<dd>mkdir (<i>path</i>) makes a new directory and checks it's existence over time.  When a package containing mkdir is uninstalled, the
directory and it's contents are removed by Pacman.  mkdirPersistent remains after a package is uninstalled.

</dd>
</p>
<p>
<dt><font color=navy><a name="message1" id="message1">message&nbsp;<i>(text)</i></a></font>, <font color=navy><a name="echo1" id="echo1">echo&nbsp;<i>(text)</i></a></font>
</dt>
<dd>Either of these prints a message.

</dd>
</p>
<p>
<dt><font color=navy><a name="cd1" id="cd1">cd&nbsp;<i>(path)</i></a></font>, <font color=navy><a name="cu1" id="cu1">cu&nbsp;<i>(username)</i></a></font>
</dt>
<dd>cd <i>(path)</i> has the same effect as <b>% cd path</b> as a unix shell command.  cd <i>()</i> undoes the previous cd command.
Similarly, cu <i>(username)</i> changes the username of the installing process and cu <i>()</i> undoes the previous username change.  cu
only works if the installer is the superuser.

</dd>
</p>
<p>
<dt><font color=navy><a name="yes1" id="yes1">yes&nbsp;<i>(question)</i></a></font>, <font color=navy><a name="no1" id="no1">no&nbsp;<i>(question)</i></a></font>, <font color=navy><a name="setenv1" id="setenv1">setenv&nbsp;<i>(env)</i></a></font>, <font color=navy><a name="choice4" id="choice4">choice&nbsp;<i>(option,&nbsp;question,&nbsp;opt1,&nbsp;opt2...)</i></a></font>, <font color=navy><a name="fail1" id="fail1">fail&nbsp;<i>(message)</i></a></font>
</dt>
<dd>Atoms <i>yes</i>, <i>no</i>, setenv with one argument and <i>choice</i> let you ask questions at installation time and remember the answers for future
installations.  This is typically used with OR branching to have a package.  For example,
<pre><b><font color="#8B0000"> { yes('Do you want to print "FOO"?'); message('FOO') OR message('not printing FOO') }
</font></pre></b>
shows how to use <i>yes</i> to ask a question and follow the first branch if the answer is 'yes'.  Similarly, <i>no</i> is satisfied as a
logical condition if the answer to the question is 'no'.  You can use choice when there are multiple possibilities as in
<b><pre><font color="#8B0000"> { choice(  'Red','Choose a color','Red','Green','Blue'); message('Red chosen'  ) OR
   choice('Green','Choose a color','Red','Green','Blue'); message('Green chosen') OR 
   choice( 'Blue','Choose a color','Red','Green','Blue'); message('Blue chosen' ) }
</font></pre></b>
Use fail(<i>message</i>) to cause an installation to fail with an error message as in
<b><pre><font color="#8B0000"> { yes('OK to make a new directory?'); mkdir('foo') OR fail('No permission to make foo.') }
</font></pre></b>
If you want to set an environment variable FOO to a value chosen by the installer, simply do
<b><pre><font color="#8B0000"> setenv('FOO')
</font></pre></b>
and Pacman will ask a question and set <b>FOO</b> appropriately.  All of these atoms save and remember the answers provided, so that the answers don't have to be repeated when the
software is updated or removed and re-installed.  The installer can always choose to ignore this saved information
by using <b>-ignore-cookies</b>.

</dd>
</p>
<p>
<dt><font color=navy><a name="exists1" id="exists1">exists&nbsp;<i>(path)</i></a></font>
</dt>
<dd>This tests that the file <i>path</i> exists at installation time.

</dd>
</p>
<p>
<dt><font color=navy><a name="askUntilFileExists1" id="askUntilFileExists1">askUntilFileExists&nbsp;<i>(path)</i></a></font>
</dt>
<dd>This tests that the file <i>path</i> exists at installation time.  If it does not exist, the installer is asked to put
the file in place and continue.

</dd>
</p>
<p>
<dt><font color=navy><a name="watch1" id="watch1">watch&nbsp;<i>(path)</i></a></font>
</dt>
<dd>Tests for the existence of a file or directory tree.  Pacman will record the last modified time of the file or director tree contents.  
If an installer then does
<b><pre><font color="#8B0000">% pacman -verify
</font></pre></b>
Pacman will report an error if any of the files have been modified.

</dd>
</p>
<p>
<dt><font color=navy><a name="which1" id="which1">which&nbsp;<i>(filename)</i></a></font>
</dt>
<dd>which tests that <i>filename</i> is in the user's standard PATH as in the familiar unix command.

</dd>
</p>
<p>
<dt><font color=navy><a name="copy2" id="copy2">copy&nbsp;<i>(fromPath,&nbsp;toPath)</i></a></font>, <font color=navy><a name="cp2" id="cp2">cp&nbsp;<i>(fromPath,&nbsp;toPath)</i></a></font>
</dt>
<dd>Copies files or directory trees.

</dd>
</p>
<p>
<dt><font color=navy><a name="copyReplace4" id="copyReplace4">copyReplace&nbsp;<i>(fromFile,&nbsp;toFile,&nbsp;matchString,&nbsp;replaceString)</i></a></font>
</dt>
<dd>Copys a text file with string replacement.

</dd>
</p>
<p>
<dt><font color=navy><a name="grep3" id="grep3">grep&nbsp;<i>(text,&nbsp;path&nbsp;[,&nbsp;comment])</i></a></font>
</dt>
<dd>Tests if the file <i>path</i> contains the text <i>text</i>.  Lines beginning with the optional <i>comment</i> (default "#") character
are ignored for the purpose of testing the condition.

</dd>
</p>
<p>
<dt><font color=navy><a name="freeDisk2" id="freeDisk2">freeDisk&nbsp;<i>(freemegs&nbsp;[,&nbsp;path])</i></a></font>
</dt>
<dd>Test whether the current working directory is in a file system with at least <i>freemegs</i> megabyte of free space.
This is only tested once at installation time.  The optional <i>path</i> variable let's you test the free space in other parts of the
installer's file system.

</dd>
</p>
<p>
<dt><font color=navy><a name="cat1" id="cat1">cat&nbsp;<i>(path)</i></a></font>
</dt>
<dd>Prints a file during installation as with the familiar unix command.

</dd>
</p>
<p>
<dt><font color=navy><a name="ls1" id="ls1">ls&nbsp;<i>(path)</i></a></font>
</dt>
<dd>Prints the contents of a directory as with the familiar unix commmand.

</dd>
</p>
<p>
<dt><font color=navy><a name="softLink2" id="softLink2">softLink&nbsp;<i>(linkFrom,&nbsp;linkTo)</i></a></font>
</dt>
<dd>Create a soft link.

</dd>
</p>
<p>
<dt><font color=navy><a name="insertLine3" id="insertLine3">insertLine&nbsp;<i>(text,&nbsp;path&nbsp;[,&nbsp;justAfterLineContaining])</i></a></font>
</dt>
<dd>Reversibly insert a line of text <i>text</i> into a text file at <i>path</i>.  The optional third argument
lets you insert a text
line just after a line containing the specified text <i>justAfterLineContaining</i>.

</dd>
</p>
<p>
<dt><font color=navy><a name="textFile2" id="textFile2">textFile&nbsp;<i>(path,&nbsp;lines)</i></a></font>
</dt>
<dd>textFile creates a text file containing <i>lines</i>.  The <i>lines</i> argument must be a list of text strings in brackets as in 
<b>textFile ('foo.csh',['#','# - comment','#'])</b>

</dd>
</p>
<p>
<dt><font color=navy><a name="mail3" id="mail3">mail&nbsp;<i>(userEmail&nbsp;[,&nbsp;subject&nbsp;[,&nbsp;body]])</i></a></font>
</dt>
<dd>Mail sends an email message to <i>userEmail</i> with optional subject <i>subject</i> and optional text body <i>body</i>. 
If the <i>body</i> argument is used, it must be a list of text strings in brackets as in
<b>mail ('youssef@bu.edu','hello',['hi','there'])</b>.

</dd>
</p>
<p>
<dt><font color=navy><a name="true0" id="true0">true&nbsp;<i>()</i></a></font>, <font color=navy><a name="false0" id="false0">false&nbsp;<i>()</i></a></font>
</dt>
<dd>true() is a condition which is guaranteed to always be satisfied and false() is guaranteed never to be satisfied.

</dd>
</p>
<p>
<dt><font color=navy><a name="launchWebBrowser1" id="launchWebBrowser1">launchWebBrowser&nbsp;<i>(url)</i></a></font>
</dt>
<dd>Launches a web browser to the indicated page.

</dd>
</p>
</dl>
<hr size=5>
<h3><a href="http://physics.bu.edu/pacman/" target="_blank">Pacman Headquarters</a></h3>

</body>
</html>
