<title>Shells</title>
<body background="sky.gif">

<h1><font color=navy>Shells</font></h1>
<hr size=5>
<dl>
<dt><font color=navy>shell <i>(command)</i>, shellDialogue <i>(command)</i></font></dt>
<dd>shell and shellDialogue let you execute standard shell commands as part of a Pacman installation.  In general, you should
use Pacman syntax instead of shell commands whenever possible for several reasons:
<ul>
<li> Pacman commands maintain their correctness over time and automatically "undo" themselves when packages are uninstalled.
<li> shell commands are executed as subprocesses, so you can't affect the installation environment variables by executing a script or shell
command.
<li> From the point of view of a cautious installer, shell commands are a potential danger.
</ul>
Several command line switches in <b>-v help</b> and <b>-ask help</b> relate to shell commands.  An installer can, for instance, use 
<b>-ask shell</b> and Pacman will stop and ask permission before executing any of these shell commands.  From the Pacman
perspective, if a shell command returns no exit code, it is considered to have successfully executed.  The shell atom sends sysout
to a log file, so if you are executing a script that interacts with the installer, you should use shellDialogue.
</dd>
<p>
<dt><font color=navy>shellOutputContains <i>(command,text)</i></font></dt>
<dd>shellOutputContains executes the shell command <i>command</i> and requires that the output contains <i>text</i>.</dd>
<p>
<dt><font color=navy>shellOutputEQ <i>(command,text)</i>, shellOutputLE <i>(command,text)</i>, shellOutputLT
<i>(command,text)</i>, shellOutputGE <i>(command,text)</i>, shellOutputG <i>(command,text)</i></font></dt>
<dd>shellOutputEQ,LE,LT,GE,GT let's you compare the output of a shell command to a provided string.  This is convenient for 
requiring versions of natively installed software.  For example, if you want to require GNU Wget at least version 1.9, you can 
do
<b><pre><font color="#8B0000">shellOutputGE('wget -v','GNU Wget 1.9')
</font></pre></b>
this requires both that wget is available and that the start of the resulting output matches or exceeds the provided string.
</dd>
<p>
<dt><font color=navy>uninstallShell <i>(command)</i></font></dt>
<dd>uninstallShell let's you specify shell commands which are only executed when a package is uninstalled.  This is typically 
useful for cleaning up the result of other shell commands.</dd>
<p>
<dt><font color=navy>setup <i>(command)</i></font></dt>
<dd>setup let's you add commands directly to the setup.csh(sh) files generated by Pacman. Typically this is used when packages have
scripts that need to be executed at user setup time.  For example, if your package has two scripts <b>mySetup.csh</b> and 
<b>mySetup.sh</b> which should be sourced at setup time, you would do something like this
<b><pre><font color="#8B0000">setup('cd $MYPACKAGE/util; source mySetup.SHELL')
</font></pre></b>
where Pacman replaces the string "SHELL" by "sh" and "csh" in the setup.csh(sh) scripts.</dd>
</dl>
<hr size=5>
<h3><a href="http://physics.bu.edu/pacman/" target="_blank">Pacman Headquarters</a></h3>
<p>
</body>
